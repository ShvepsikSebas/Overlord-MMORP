<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Battle For Yggdrasil | SPA</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* —Ç–æ—Ç –∂–µ CSS —á—Ç–æ –∏ —Ä–∞–Ω—å—à–µ */
    * { box-sizing:border-box; margin:0; padding:0; }
    body { font-family:'Roboto',sans-serif; background:#0d0d16; color:#fff; overflow-x:hidden; }
    .slider { position:relative; width:100%; height:100vh; overflow:hidden; }
    .overlay-title{ position:absolute; top:20px; width:100%; text-align:center; font-size:2em; text-shadow:0 0 10px rgba(0,0,0,.7); z-index:5; pointer-events:none; }
    .slide{ position:absolute; width:100%; height:100%; background-size:cover; background-position:center; opacity:0; transition:opacity 1s ease; cursor:pointer; }
    .slide.active{ opacity:1; z-index:2;}
    .slide h2{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:3em; text-shadow:0 0 20px rgba(255,255,255,.8); opacity:0; transition:opacity 1s ease .5s; }
    .slide.active h2{ opacity:1; }
    .nav-button{ position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,.4); color:#fff; border:none; border-radius:12px; cursor:pointer; font-size:5em; padding:30px 40px; transition:background .3s; z-index:3;}
    .nav-button:hover{ background:rgba(255,255,255,.2); }
    .prev{ left:10px; } .next{ right:10px; }
    .footer-buttons{ position:absolute; bottom:40px; width:100%; display:flex; justify-content:center; gap:20px; z-index:4; }
    .footer-buttons a, .footer-buttons button{ background:#fca311; color:#000; padding:12px 24px; border-radius:8px; text-decoration:none; font-weight:bold; font-size:1.1em; cursor:pointer; border:none; transition:background .3s;}
    .footer-buttons a:hover, .footer-buttons button:hover{ background:#fff; }
    .info-panel-container{ position:relative; width:fit-content; margin:50px auto; }
    .info-panel{ background:rgba(28,28,46,.5); backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px); border:1px solid rgba(255,255,255,.2); display:flex; align-items:center; padding:60px; border-radius:12px; transform:translateX(-100%); opacity:0; transition:transform 1s ease,opacity 1s ease; cursor:pointer; z-index:1; width:80vw; max-width:900px; }
    .info-panel.visible{ transform:translateX(0); opacity:1; }
    .info-panel img{ width:160px; height:160px; border-radius:8px; margin-right:30px; object-fit:cover; }
    .info-panel .text{ font-size:1.3em; line-height:1.6; color:#ddd; }
    .info-panel-container .hand{ position:absolute; right:-140px; top:50%; transform:translateX(50%) translateY(-50%); opacity:0; width:100px; transition:transform .5s ease,opacity .5s ease; z-index:2;}
    .info-panel-container:hover .hand{ transform:translateX(0) translateY(-50%); opacity:1;}
    footer{ text-align:center; padding:20px; font-size:.9em; color:#888; background:#0b0b12;}
  </style>
</head>
<body>

  <!-- YouTube-–ø–ª–µ–µ—Ä -->
  <div id="yt-player"></div>

  <!-- –°–ª–∞–π–¥–µ—Ä -->
  <div class="slider">
    <div class="overlay-title">OVERLORD MMORP | Battle For Yggdrasil</div>
    <div class="slide active" data-href="rules.html" style="background-image:url('rules1.png')">
      <h2>–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä–∞</h2>
    </div>
    <div class="slide" data-href="fractions.html" style="background-image:url('fractions1.png')">
      <h2>–ü—Ä–∞–≤–∏–ª–∞ —Ñ—Ä–∞–∫—Ü–∏–π</h2>
    </div>
    <div class="slide" data-href="chatrules.html" style="background-image:url('chatrules1.png')">
      <h2>–ü—Ä–∞–≤–∏–ª–∞ –æ–±—â–µ–Ω–∏—è</h2>
    </div>
    <button class="nav-button prev">‚ùÆ</button>
    <button class="nav-button next">‚ùØ</button>
    <div class="footer-buttons">
      <a href="https://sites.google.com/view/battle-for-yggdrasil/–≥–ª–∞–≤–Ω–∞—è-—Å—Ç—Ä–∞–Ω–∏—Ü–∞">üí∞ –î–æ–Ω–∞—Ç</a>
      <button id="music-toggle">üîä</button>
    </div>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–¥–≥—Ä—É–∂–∞–µ–º–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
  <div id="content"></div>

  <footer>¬© 2025 Battle For Yggdrasil ‚Äî –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</footer>

  <script>
    // 1) YouTube IFrame API
    let tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);
    let player;
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('yt-player', {
        height:'0', width:'0',
        videoId:'gfz4Z7vNxJ8',
        playerVars:{
          autoplay:1, loop:1,
          playlist:'gfz4Z7vNxJ8',
          controls:0, modestbranding:1,
          disablekb:1, iv_load_policy:3, rel:0
        },
        events:{ onReady: e => {
          e.target.setVolume(15); 
          e.target.playVideo();
        }}
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      // –°–ª–∞–π–¥–µ—Ä
      const slides = document.querySelectorAll('.slide');
      let current=0;
      function show(i){
        slides.forEach(s=>s.classList.remove('active'));
        slides[i].classList.add('active');
      }
      document.querySelector('.prev').onclick = () => { current=(current-1+slides.length)%slides.length; show(current); };
      document.querySelector('.next').onclick = () => { current=(current+1)%slides.length; show(current); };
      show(0);

      // –ù–∞–≤–∏–≥–∞—Ü–∏—è SPA
      const content = document.getElementById('content');
      function load(url, addHistory=true){
        fetch(url)
          .then(r=>r.text())
          .then(html=>{
            content.innerHTML = html;
            if(addHistory) history.pushState({url}, '', url);
          });
      }
      // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∞–≤–∏–ª–∞
      load('rules.html', false);

      slides.forEach((slide,i)=>{
        slide.addEventListener('click', ()=>{
          load(slide.dataset.href);
          current = i;
          show(i);
        });
      });

      window.addEventListener('popstate', e => {
        if(e.state && e.state.url) load(e.state.url, false);
      });

      // –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞
      const btn = document.getElementById('music-toggle');
      btn.addEventListener('click', ()=>{
        if(!player) return;
        if(player.isMuted()){
          player.unMute();
          btn.textContent='üîä';
        } else {
          player.mute();
          btn.textContent='üîá';
        }
      });

      // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
      document.addEventListener('click', ()=>{ if(player && player.playVideo) player.playVideo(); }, {once:true}); 

      // Scroll-reveal –ø–∞–Ω–µ–ª–∏
      const panel = document.querySelector('.info-panel');
      window.addEventListener('scroll', ()=>{
        if(panel.getBoundingClientRect().top < innerHeight)
          panel.classList.add('visible');
      });
    });
  </script>
</body>
</html>
